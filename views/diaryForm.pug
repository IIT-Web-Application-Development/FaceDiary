extends layout.pug

block scripts
  // Tiny scripts- 1KB each - that are needed right away, thus in the head
  link(rel='stylesheet' href='/css/main.css')
  script(type='text/javascript' src='/js/analyzePhoto.js')
  script(type='text/javascript' src='/js/retakePhoto.js')
  script(type='text/javascript' src='/js/makeEntry.js')
  script(type='text/javascript' src='/js/getCamera.js')  

//- New Diary entry form
block content
  //h1= user.id
  h1.mt-5= title
    #camera-and-photo-container.mb-1
      video#camera.mr-3(autoplay='' width='320' height='240')
      canvas#photoContainer(width='320' height='240')
    div.btn-group.btn-group-lg
      button#capture.btn Take Photo
      button#retakePhoto.btn(onclick='retakePhoto()') Retake
      button#usePhoto.btn(onclick='analyzePhoto()') Use Photo
    div
      button#makeEntry.btn.btn-lg.btn-secondary(onclick='makeEntry()') Save Entry
    form(method="POST")
      #results-container(hidden='true')
        | Feeling: 
        p#results.d-inline
      input#comment.form-control.mx-auto(type='text', placeholder='Enter comment', name="comment", value=diary.comment)

      input#user-id(type='hidden', name='userid', value=user.id)
      input#emotion(type='hidden', name='emotion' value=diary.emotion)
      input#picture-url(type='hidden', name='picture', value=diary.picture)      
      input#date(type='hidden', name='timestamp' value=diary.timestamp)

      button.btn.btn-lg.btn-primary(type='submit') Fnish Entry
      
  script.
    getCamera()

block append scripts2
  // Huge script (701 KB), so placed at the bottom. Not needed until uploading
  script(src='/js/azure-storage.blob.min.js')
